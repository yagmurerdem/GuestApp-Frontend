{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\digerpcden\\\\digerpcdenYagmurErdem\\\\Benim\\\\questapp\\\\questappreact\\\\quest-app-react-app\\\\src\\\\components\\\\Post\\\\Post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { styled } from '@mui/material/styles';\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardHeader';\nimport CardContent from '@mui/material/CardContent';\nimport CardActions from '@mui/material/CardActions';\nimport Collapse from '@mui/material/Collapse';\nimport Avatar from '@mui/material/Avatar';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport InsertCommentIcon from '@mui/icons-material/InsertComment';\nimport { Link } from \"react-router-dom\";\nimport { Container } from '@mui/material';\nimport Comment from '../Comment/Comment';\nimport CommentForm from '../Comment/CommentForm'; //import { useState } from \"react\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExpandMore = styled(props => {\n  const {\n    expand,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(IconButton, { ...other\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 10\n  }, this);\n})(_ref => {\n  let {\n    theme,\n    expand\n  } = _ref;\n  return {\n    transform: !expand ? 'rotate(0deg)' : '',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  };\n});\n_c = ExpandMore;\nexport default function Post(props) {\n  _s();\n\n  const [expanded, setExpanded] = React.useState(false); //aşağı doğru açılıp kapanan ok için\n\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false); //data geldi gelmedi mi\n\n  const {\n    title,\n    text,\n    kisiId,\n    kisiName,\n    id,\n    likes\n  } = props; // const [liked, setLiked] = useState(false);\n\n  const [commentList, setCommentList] = useState([]);\n  const isInitialMount = useRef(true); //sayfa ilk kez mi load ediliyor yoksa biri tıkladıda commentleri açtı mı onu söylicek//sayfa açıldığı an commentlerin render edilmesini istemiyoruz.\n\n  const [isLiked, setIsLiked] = useState(false);\n  const [likeCount, setLikeCount] = useState(likes.length);\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n    refreshComments(); //icona tıklandığında verileri çek diyorum\n\n    console.log(commentList);\n  };\n\n  const handleLike = () => {\n    setIsLiked(!isLiked);\n    if (!isLiked) setLikeCount(likeCount + 1);else setLikeCount(likeCount - 1);\n  };\n\n  const refreshComments = () => {\n    fetch(\"/comments?id=\" + id) //bu postun commentlerini getir\n    .then(res => res.json()).then(result => {\n      setIsLoaded(true); //data geldi\n\n      setCommentList(result); //data\n    }, error => {\n      console.log(error);\n      setIsLoaded(true);\n      setError(error);\n    });\n  };\n\n  const saveLike = () => {\n    fetch(\"/likes\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: id,\n        //postid\n        kisiId: kisiId\n      })\n    }).then(res => res.json()).catch(err => console.log(err));\n  };\n\n  const checkLikes = () => {\n    var likeControl = likes.find(like => like.kisiId === kisiId);\n    if (likeControl != null) setIsLiked(true);\n  };\n\n  useEffect(() => {\n    if (isInitialMount.current) isInitialMount.current = false; //ilk defa ayağa kalktığını gördüm artık false a çekebilirim.Bir dahaki gelişte oraya girmesin diye\n    else refreshComments(); //değilse commentleri refresle\n  }, [commentList]); //herhangi bir değişiklik olduğunda algıla ve refresle //yani birşey kaydettiğimde ekrana kaydettiğimi getir\n\n  useEffect(() => {\n    checkLikes();\n  }, []); //Sadece ilk yüklenme işlemi sonrasında çalışması için kullanılan useEffect()\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"postContainer\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        width: 800,\n        textAlign: 'left',\n        margin: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        avatar: /*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: '/kisiler/' + kisiId\n          },\n          sx: {\n            textDecoration: \"none\",\n            boxShadow: \"none\",\n            color: \"white\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Avatar, {\n            sx: {\n              background: 'linear-gradient(45deg,#2196F3 30%, #21CBF3 90%)'\n            },\n            \"aria-label\": \"recipe\",\n            children: kisiName.charAt(0).toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this),\n        title: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n        disableSpacing: true,\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleLike,\n          \"aria-label\": \"add to favorites\",\n          children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n            style: isLiked ? {\n              color: 'red'\n            } : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), likeCount, /*#__PURE__*/_jsxDEV(ExpandMore, {\n          expand: expanded,\n          onClick: handleExpandClick,\n          \"aria-expanded\": expanded,\n          \"aria-label\": \"show more\",\n          children: /*#__PURE__*/_jsxDEV(InsertCommentIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n        in: expanded,\n        timeout: \"auto\",\n        unmountOnExit: true,\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          fixed: true,\n          children: [error ? \"error\" : isLoaded ? commentList.map(comment => /*#__PURE__*/_jsxDEV(Comment, {\n            kisiId: 1,\n            kisiName: \"KİSİ\",\n            text: comment.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 19\n          }, this)) : \"Loading\", /*#__PURE__*/_jsxDEV(CommentForm, {\n            kisiId: 1,\n            kisiName: \"KİSİ\",\n            id: id,\n            children: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Post, \"1SjFhzAVSYFEiE8JeKShsJpSvk0=\");\n\n_c2 = Post;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ExpandMore\");\n$RefreshReg$(_c2, \"Post\");","map":{"version":3,"sources":["C:/Users/Asus/Desktop/digerpcden/digerpcdenYagmurErdem/Benim/questapp/questappreact/quest-app-react-app/src/components/Post/Post.js"],"names":["React","useState","useRef","useEffect","styled","Card","CardHeader","CardContent","CardActions","Collapse","Avatar","IconButton","Typography","FavoriteIcon","InsertCommentIcon","Link","Container","Comment","CommentForm","ExpandMore","props","expand","other","theme","transform","marginLeft","transition","transitions","create","duration","shortest","Post","expanded","setExpanded","error","setError","isLoaded","setIsLoaded","title","text","kisiId","kisiName","id","likes","commentList","setCommentList","isInitialMount","isLiked","setIsLiked","likeCount","setLikeCount","length","handleExpandClick","refreshComments","console","log","handleLike","fetch","then","res","json","result","saveLike","method","headers","body","JSON","stringify","catch","err","checkLikes","likeControl","find","like","current","width","textAlign","margin","pathname","textDecoration","boxShadow","color","background","charAt","toUpperCase","map","comment"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { styled } from '@mui/material/styles';\r\nimport Card from '@mui/material/Card';\r\nimport CardHeader from '@mui/material/CardHeader';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CardActions from '@mui/material/CardActions';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Typography from '@mui/material/Typography';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport InsertCommentIcon from '@mui/icons-material/InsertComment';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Container } from '@mui/material';\r\nimport Comment from '../Comment/Comment';\r\nimport CommentForm from '../Comment/CommentForm';\r\n//import { useState } from \"react\";\r\n\r\n\r\nconst ExpandMore = styled((props) => {\r\n  const { expand, ...other } = props;\r\n  return <IconButton {...other} />;\r\n})(({ theme, expand }) => ({\r\n  transform: !expand ? 'rotate(0deg)' : '',\r\n  marginLeft: 'auto',\r\n  transition: theme.transitions.create('transform', {\r\n    duration: theme.transitions.duration.shortest,\r\n  }),\r\n}));\r\n\r\n\r\nexport default function Post(props) {\r\n  const [expanded, setExpanded] = React.useState(false); //aşağı doğru açılıp kapanan ok için\r\n  const [error, setError] = useState(null)\r\n  const [isLoaded, setIsLoaded] = useState(false) //data geldi gelmedi mi\r\n  const { title, text, kisiId, kisiName, id, likes } = props;\r\n  // const [liked, setLiked] = useState(false);\r\n  const [commentList, setCommentList] = useState([]);\r\n  const isInitialMount = useRef(true); //sayfa ilk kez mi load ediliyor yoksa biri tıkladıda commentleri açtı mı onu söylicek//sayfa açıldığı an commentlerin render edilmesini istemiyoruz.\r\n  \r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [likeCount, setLikeCount] = useState(likes.length);\r\n\r\n  const handleExpandClick = () => {\r\n    setExpanded(!expanded);\r\n    refreshComments(); //icona tıklandığında verileri çek diyorum\r\n    console.log(commentList);\r\n  };\r\n\r\n  const handleLike = () => {\r\n    setIsLiked(!isLiked);\r\n    if(!isLiked)\r\n    setLikeCount(likeCount+1)\r\n    else \r\n    setLikeCount(likeCount-1)\r\n  }\r\n\r\n  const refreshComments = () => {\r\n    fetch(\"/comments?id=\" + id) //bu postun commentlerini getir\r\n      .then(res => res.json())\r\n      .then(\r\n        (result) => {\r\n          setIsLoaded(true); //data geldi\r\n          setCommentList(result) //data\r\n        },\r\n        (error) => {\r\n          console.log(error)\r\n          setIsLoaded(true);\r\n          setError(error);\r\n        }\r\n      )\r\n  }\r\n\r\n  const saveLike=()=>{\r\n    fetch(\"/likes\",{\r\n      method:\"POST\",\r\n      headers:{\r\n        \"Content-Type\":\"application/json\",\r\n      },\r\n      body:JSON.stringify({\r\n        id:id, //postid\r\n        kisiId:kisiId,\r\n      }),\r\n    })\r\n    .then((res) =>res.json())\r\n    .catch((err) =>console.log(err))\r\n\r\n  }\r\n  const checkLikes = () => {\r\n    var likeControl = likes.find((like => like.kisiId === kisiId))\r\n    if (likeControl != null)\r\n      setIsLiked(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isInitialMount.current)\r\n      isInitialMount.current = false; //ilk defa ayağa kalktığını gördüm artık false a çekebilirim.Bir dahaki gelişte oraya girmesin diye\r\n    else\r\n      refreshComments(); //değilse commentleri refresle\r\n  }, [commentList])//herhangi bir değişiklik olduğunda algıla ve refresle //yani birşey kaydettiğimde ekrana kaydettiğimi getir\r\n\r\n\r\n  useEffect(() => { checkLikes() }, []) //Sadece ilk yüklenme işlemi sonrasında çalışması için kullanılan useEffect()\r\n\r\n  return (\r\n    <div className=\"postContainer\">\r\n      <Card sx={{ width: 800, textAlign: 'left', margin: 2 }}>\r\n        <CardHeader\r\n          avatar={\r\n            <Link to={{ pathname: '/kisiler/' + kisiId }} sx={{ textDecoration: \"none\", boxShadow: \"none\", color: \"white\" }}>\r\n              <Avatar sx={{ background: 'linear-gradient(45deg,#2196F3 30%, #21CBF3 90%)' }} aria-label=\"recipe\">\r\n                {kisiName.charAt(0).toUpperCase()}\r\n              </Avatar>\r\n            </Link>\r\n          }\r\n\r\n          title={title}\r\n\r\n        />\r\n\r\n        <CardContent>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            {text}\r\n          </Typography>\r\n        </CardContent>\r\n        <CardActions disableSpacing>\r\n          <IconButton\r\n\r\n            onClick={handleLike}\r\n            aria-label=\"add to favorites\">\r\n            <FavoriteIcon style={isLiked ? { color: 'red' } : null} />\r\n\r\n          </IconButton>\r\n          {likeCount}\r\n          <ExpandMore\r\n            expand={expanded}\r\n            onClick={handleExpandClick}\r\n            aria-expanded={expanded}\r\n            aria-label=\"show more\"\r\n          >\r\n            <InsertCommentIcon />\r\n          </ExpandMore>\r\n        </CardActions>\r\n        <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n          <Container fixed >\r\n            {\r\n              error ? \"error\" :\r\n                isLoaded ? commentList.map(comment => (\r\n                  <Comment kisiId={1} kisiName={\"KİSİ\"} text={comment.text}></Comment>\r\n\r\n                )) : \"Loading\"}\r\n            <CommentForm kisiId={1} kisiName={\"KİSİ\"} id={id}> </CommentForm>\r\n\r\n          </Container>\r\n        </Collapse>\r\n      </Card>\r\n\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}